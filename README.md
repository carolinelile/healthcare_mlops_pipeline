# 🏥 Healthcare MLOps Pipeline (Synthea + GCP)

## 🔍 Problem Description

Chronic conditions such as hypertension, diabetes, and heart failure require long-term patient monitoring and personalized interventions. However, healthcare data is often complex, fragmented, and difficult to analyze due to inconsistent formats like FHIR.

This project simulates a real-world healthcare analytics and ML workflow using **synthetic patient data** generated by [Synthea](https://github.com/synthetichealth/synthea). The goal is to ingest, standardize, model, and analyze this data to predict **30-day readmission risk** — demonstrating a full MLOps lifecycle in a cloud-native environment.

---

## ☁️ Cloud Infrastructure

- **Cloud Provider**: Google Cloud Platform (GCP)
- **Provisioned with**: Terraform (Infrastructure-as-Code)
- **Key Services**:
  - Google Cloud Storage (GCS)
  - Google Cloud Healthcare API (FHIR Store)
  - BigQuery (staging and modeling)
  - Vertex AI (training, experiment tracking, model registry, deployment)
  - Cloud Composer (Airflow orchestration)
  - IAM, Service Accounts, Artifact Registry

---

## 📊 Pipeline Architecture

```bash
Synthea JSON
   ↓
Google Cloud Storage (Raw Data)
   ↓
FHIR Store (via Healthcare API)
   ↓
BigQuery (via FHIR Export API)
   ↓
ML Model Training (Vertex AI)
   ↓
Model Deployment (Vertex AI Endpoint)
   ↓
Monitoring & Retraining Triggers

```
---

## 🧰 Tech Stack

| Layer                | Tools / Services                              |
|---------------------|------------------------------------------------|
| Data Generation      | Synthea                                       |
| Ingestion & Cleaning | Python, GCS, Healthcare API                   |
| Storage              | GCS (raw), BigQuery (flattened data)          |
| ML & Tracking        | Vertex AI (AutoML or custom model, registry)  |
| Orchestration        | Airflow (via Cloud Composer)                  |
| Deployment           | Vertex AI Endpoint                            |
| Monitoring           | Airflow + GCP Logging                         |
| Infrastructure       | Terraform                                     |
| Reproducibility      | Makefile, `.env`                              |

---

## 🧪 Machine Learning

### 🎯 Problem
Predict whether a patient will be readmitted within 30 days of discharge.

### 🧾 Features
- Age, gender
- Encounter type, count of visits
- Diagnosis codes (ICD)
- Chronic conditions (diabetes, hypertension, etc.)
- Medication requests

### 🏷️ Target
- Binary classification: `readmitted_within_30_days`

### 🛠 Tools
- Vertex AI Pipelines for training
- Experiment tracking (via Vertex AI Experiments)
- Vertex AI Model Registry for versioning

---

## 🛡️ Monitoring

- Scheduled batch scoring
- Prediction drift metrics logged to BigQuery
- Conditional workflow in Airflow (retrain if threshold violated)

---

## 🔁 Reproducibility

- All infra managed with Terraform
- `Makefile` for repeatable commands
- `.env` used for configuration (project, bucket, dataset names)
- Versioned dependencies in `requirements.txt`

```bash
# Sample flow
git clone https://github.com/your-username/healthcare-mlops-pipeline.git
cd healthcare-mlops-pipeline

cp .env.example .env  # Edit project details

make setup            # Install dependencies, initialize Terraform
make deploy           # Provision infra + run end-to-end pipeline
